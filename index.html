<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>BlackJack</title>
</head>
<body>
    <h1>BlackJack</h1>
    <p>Reload the page to play again</p>

    <script>
        //// NOTE: Most casinos play with 6-decks shuffled together
        //// DECK -- REAL
        // const deck = [
        //     "A", "A", "A", "A", 
        //     "K", "K", "K", "K", 
        //     "Q", "Q", "Q", "Q",
        //     "J", "J", "J", "J",
        //     10, 10, 10, 10,
        //     9, 9, 9, 9,
        //     8, 8, 8, 8,
        //     7, 7, 7, 7,
        //     6, 6, 6, 6,
        //     5, 5, 5, 5,
        //     4, 4, 4, 4,
        //     3, 3, 3, 3,
        //     2, 2, 2, 2];

        // DECK -- ONE TO ELEVEN
        const deck1to11 = [
            11, 11, 11, 11,
            10, 10, 10, 10,
            9, 9, 9, 9,
            8, 8, 8, 8,
            7, 7, 7, 7,
            6, 6, 6, 6,
            5, 5, 5, 5,
            4, 4, 4, 4,
            3, 3, 3, 3,
            2, 2, 2, 2];

        // // DECK -- TESTING WITH 4 CARDS
        // const deck1to11 = ["a", "b", "c", "d"];

        const dealerCards = [];

        const playerCards = [];

        const selectRandomIndexInDeck = deck => {
            // Selects a number from 0 to the length of the array - 1, an array with length 40 would have a range of 0 to 39, corresponding with the possible indexes of each item in the array
            const cardNumber = Math.floor(Math.random() * (deck.length));
            return cardNumber;
        };

        const dealCards = deck => {
            for(let i = 0; i < 3; i++){
                
                dealerCards.push(deck.splice(selectRandomIndexInDeck(deck), 1).pop());
                playerCards.push(deck.splice(selectRandomIndexInDeck(deck), 1).pop());
                /* 
                Removes 1 card from deck and adds it to the dealerCards array
                Removes 1 card from deck and adds it to the playerCards array

                "deck.splice(selectRandomIndexInDeck(deck), 1)" creates an array of length 1

                .pop() removes the last item from than new array and returns it to be pushed to the target array
                
                Example: if splicing a card with value 5 from deck to an empty dealerCards array
                dealerCards[] becomes dealercCards[5]
                
                Example: if splicing a card with value 8 from deck to dealerCards array of dealerCards[5]
                dealerCards[5] becomes dealercCards[5, 8]

                */
            };
        };

        dealCards(deck1to11);

        // Add up the numbers in a given array

        const dealerTotal = dealerCards.reduce((total, cardValue) => total + cardValue);
        const playerTotal = playerCards.reduce((total, cardValue) => total + cardValue);

        const isBust = handTotal => {
            if(handTotal > 21) {
                return true;
            }
            else {
                return false;
            };
        };

        const determineWinner = (dealerTotal, playerTotal) => {
            if(isBust(playerTotal)){
                return "YOU LOSE -- PLAYER BUST";                
            }
            else if(isBust(dealerTotal)) {
                return "YOU WIN -- DEALER BUST";
            }
            else {
                if(playerTotal === dealerTotal) {
                    return "PUSH"
                }
                else if(playerTotal > dealerTotal) {
                    return "YOU WIN -- DEALER LOWER";
                }
                else {
                    return "YOU LOSE -- DEALER HIGHER";
                };
            };
        };

        console.log(`Dealer Cards: ${dealerCards}`);
        console.log(`Dealer Total: ${dealerTotal}`);
        console.log(`Bust? ${isBust(dealerTotal)}`);        
        console.log('');
        
        console.log(`Player Cards: ${playerCards}`);
        console.log(`Player Total: ${playerTotal}`);
        console.log(`Bust? ${isBust(playerTotal)}`);
        console.log('');
        
        console.log(determineWinner(dealerTotal, playerTotal));
        

        
        

        // ORIGINAL VERSION

        // deal 3 cards to 1 player and the dealer

        // remove dealt cards from array

        // display count for dealer and player

        // Accounce winner


        // EXPANDED VERSION
        // deal 2 cards to player and dealer
        
        // remove dealt cards from array
        
        // display count for dealer and player
        
        // allow player to hit
        
        // dealer hits if < 17

        // Ace can be either 1 or 11


        //// STRETCH GOALS ////
        
        // Play with more than one player (max 8?)
        
        // Play with more than one deck (max 5? look into casino play)

        // Allow for multiple rounds to be played with 1 deck

    </script>
</body>
</html>